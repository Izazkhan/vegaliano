{% liquid
  assign small_screens = '320,480,768' | split: ','
  assign medium_screens = '1024' | split: ','
  assign large_screens = '1280,1600' | split: ','
  assign breakpoints = breakpoints | split: ','
  assign mb_src = mb_src | default: src
%}
<picture>
  {% for bp in breakpoints %}
    {% assign screen = bp | first %}
    {% assign slides = bp | last %}
    {% case screen %}
      {% when 's' %}
        <!-- Small image -->
        <source
          media="(max-width: 768px)"
          srcset="
            {% for width in small_screens %}
             {% assign wd = width | divided_by: slides %}
              {{ mb_src | image_url: width: wd  }} {{ wd }}w,
            {% endfor %}
          "
        >
      {% when 'm' %}
        <!-- Medium image -->
        <source
          media="(max-width: 1023px)"
          srcset="
            {% for width in medium_screens %}
             {% assign wd = width | divided_by: slides %}
              {{ mb_src | image_url: width: wd }} {{ wd }}w,
            {% endfor %}
          "
        >

      {% when 'l' %}
        <!-- large image -->
        <source
          media="(min-width: 1024px)"
          srcset="
            {% for width in large_screens %}
             {% assign wd = width | divided_by: slides %}
              {{ src | image_url: width: wd }} {{ wd }}w,
            {% endfor %}
          "
        >
    {% endcase %}
  {% endfor %}
  <img
    width="100%"
    height="100%"
    src="{{ src | image_url }}"
    alt="{{alt}}"
    class="main-img object-cover object-center"
  >
</picture>
