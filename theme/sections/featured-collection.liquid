<div class="flex justify-center items-center p-5">
  <div class="text-[#363636] text-center w-1/5">
    <h2 class="text-[15px] md:text-[30px] leading-[1.4] font-medium">WHAT'S</h2>
    <h2 class="text-[30px] md:text-[45px] leading-[1.4] font-semibold">NEW</h2>
  </div>
  <div class="w-4/5 flex-1">
    <div class="embla">
      <div class="embla__viewport overflow-hidden">
        <div class="embla__container flex -ml-[1rem] touch-pan-y">
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold shadow-inner rounded-[1.8rem] h-[19rem] select-none"
            >
              1
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold shadow-inner rounded-[1.8rem] h-[19rem] select-none"
            >
              2
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold shadow-inner rounded-[1.8rem] h-[19rem] select-none"
            >
              3
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold shadow-inner rounded-[1.8rem] h-[19rem] select-none"
            >
              4
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold shadow-inner rounded-[1.8rem] h-[19rem] select-none"
            >
              5
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold shadow-inner rounded-[1.8rem] h-[19rem] select-none"
            >
              6
            </div>
          </div>
          <!-- Additional Slides -->
        </div>
      </div>

      <!-- Controls -->
      <div class="embla__controls grid grid-cols-[auto_1fr] gap-[1.2rem] mt-[1.8rem]">
        <div class="embla__buttons grid grid-cols-2 gap-[0.6rem] items-center">
          <button
            class="embla__button embla__button--prev flex items-center justify-center rounded-full w-[3.6rem] h-[3.6rem] text-body shadow-inner"
            aria-label="Previous"
          >
            <!-- SVG Icon -->
          </button>
          <button
            class="embla__button embla__button--next flex items-center justify-center rounded-full w-[3.6rem] h-[3.6rem] text-body shadow-inner"
            aria-label="Next"
          >
            <!-- SVG Icon -->
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function () {
    const OPTIONS = { slidesToScroll: 'auto', loop: true };

    const emblaNode = document.querySelector('.embla');
    const viewportNode = emblaNode.querySelector('.embla__viewport');
    const prevBtnNode = emblaNode.querySelector('.embla__button--prev');
    const nextBtnNode = emblaNode.querySelector('.embla__button--next');
    const dotsNode = emblaNode.querySelector('.embla__dots');

    const emblaApi = EmblaCarousel(viewportNode, OPTIONS);
    // Custom scroll logic
    const handleNextSlide = () => {
      const currentIndex = emblaApi.selectedScrollSnap();
      const lastSlideIndex = emblaApi.scrollSnapList().length - 1;

      // Move 4 slides if on the last two slides, otherwise move 2 slides
      if (currentIndex >= lastSlideIndex - 2) {
        emblaApi.scrollTo(0); // Go back to the start
      } else {
        emblaApi.scrollNext(); // Move forward by 2
      }
    };

    const handlePrevSlide = () => {
      const currentIndex = emblaApi.selectedScrollSnap();

      // If at the start, go to the last two slides; otherwise, go back by 2 slides
      if (currentIndex === 0) {
        emblaApi.scrollTo(emblaApi.scrollSnapList().length - 1);
      } else {
        emblaApi.scrollPrev();
      }
    };

    // Bind custom navigation
    nextBtnNode.addEventListener('click', handleNextSlide);
    prevBtnNode.addEventListener('click', handlePrevSlide);

    // Clean up events on Embla destruction
    emblaApi.on('destroy', () => {
      nextBtnNode.removeEventListener('click', handleNextSlide);
      prevBtnNode.removeEventListener('click', handlePrevSlide);
    });
  })();
</script>
