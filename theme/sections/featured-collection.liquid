<div class="flex justify-center items-center p-5">
  <div class="text-[#363636] text-center w-1/4">
    <h2 class="text-[15px] md:text-[30px] leading-[1.4] font-medium">WHAT'S</h2>
    <h2 class="text-[30px] md:text-[45px] leading-[1.4] font-semibold">NEW</h2>
  </div>
  <div class="w-3/4">
    <div class="embla">
      <div class="embla__viewport overflow-hidden">
        <div class="embla__container flex -ml-[1rem] touch-pan-y">
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold select-none"
            >
              <a href="#" class="w-full flex flex-col justify-center items-center">
                    <div class="flex w-full justify-center items-center">
                        <img src="{{ 'vasl.jpg' | asset_url }}" class="rounded-full w-full">
                    </div>
                    <div class="pt-4 text-[#191918] text-[12px]">
                        Vasl
                    </div>
                </a>
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold select-none"
            >
              <a href="#" class="w-full flex flex-col justify-center items-center">
                    <div class="flex w-full justify-center items-center">
                        <img src="{{ 'limited.jpg' | asset_url }}" class="rounded-full w-full">
                    </div>
                    <div class="pt-4 text-[#191918] text-[12px]">
                        Limited Edition
                    </div>
                </a>
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold select-none"
            >
              <a href="#" class="w-full flex flex-col justify-center items-center">
                    <div class="flex w-full justify-center items-center">
                        <img src="{{ 'chaandni_ratein.jpg' | asset_url }}" class="rounded-full w-full">
                    </div>
                    <div class="pt-4 text-[#191918] text-[12px]">
                        Chandni Raatein
                    </div>
                </a>
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold select-none"
            >
              <a href="#" class="w-full flex flex-col justify-center items-center">
                    <div class="flex w-full justify-center items-center">
                        <img src="{{ 'basic_print.jpg' | asset_url }}" class="rounded-full w-full">
                    </div>
                    <div class="pt-4 text-[#191918] text-[12px]">
                        Basic Prints
                    </div>
                </a>
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold select-none"
            >
              <a href="#" class="w-full flex flex-col justify-center items-center">
                    <div class="flex w-full justify-center items-center">
                        <img src="{{ 'essential_pret.jpg' | asset_url }}" class="rounded-full w-full">
                    </div>
                    <div class="pt-4 text-[#191918] text-[12px]">
                        Essential Pret
                    </div>
                </a>
            </div>
          </div>
          <div class="embla__slide grow-0 shrink-0 basis-1/2 md:basis-1/4 lg:basis-1/6 pl-[1rem] translate-3d">
            <div
              class="embla__slide__number flex items-center justify-center text-4xl font-semibold select-none"
            >
              <a href="#" class="w-full flex flex-col justify-center items-center">
                    <div class="flex w-full justify-center items-center">
                        <img src="{{ 'kids.jpg' | asset_url }}" class="rounded-full w-full">
                    </div>
                    <div class="pt-4 text-[#191918] text-[12px]">
                        Kids Pret
                    </div>
                </a>
            </div>
          </div>
          <!-- Additional Slides -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function () {
    const OPTIONS = { slidesToScroll: 2, loop: true };

    const emblaNode = document.querySelector('.embla');
    const viewportNode = emblaNode.querySelector('.embla__viewport');

    const emblaApi = EmblaCarousel(viewportNode, OPTIONS);
    // Custom scroll logic
    const handleNextSlide = () => {
      const currentIndex = emblaApi.selectedScrollSnap();
      const lastSlideIndex = emblaApi.scrollSnapList().length - 1;

      // Move 4 slides if on the last two slides, otherwise move 2 slides
      if (currentIndex >= lastSlideIndex - 2) {
        emblaApi.scrollTo(0); // Go back to the start
      } else {
        emblaApi.scrollNext(); // Move forward by 2
      }
    };

    const handlePrevSlide = () => {
      const currentIndex = emblaApi.selectedScrollSnap();

      // If at the start, go to the last two slides; otherwise, go back by 2 slides
      if (currentIndex === 0) {
        emblaApi.scrollTo(emblaApi.scrollSnapList().length - 1);
      } else {
        emblaApi.scrollPrev();
      }
    };

    // Clean up events on Embla destruction
    emblaApi.on('destroy', () => {
      nextBtnNode.removeEventListener('click', handleNextSlide);
      prevBtnNode.removeEventListener('click', handlePrevSlide);
    });
  })();
</script>
